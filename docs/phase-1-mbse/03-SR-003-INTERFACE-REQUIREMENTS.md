# SR-003: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º —Å–∏—Å—Ç–µ–º—ã A2D2

## –î–æ–∫—É–º–µ–Ω—Ç —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π (SRD)
**–í–µ—Ä—Å–∏—è**: 1.0
**–î–∞—Ç–∞**: 28 –æ–∫—Ç—è–±—Ä—è 2025
**–°—Ç–∞—Ç—É—Å**: –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ

---

## 1. –í–≤–µ–¥–µ–Ω–∏–µ

–î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤—Å–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã A2D2:
- **User Interfaces**: Web, API
- **System Interfaces**: Internal communications
- **External Interfaces**: Third-party integrations

---

## 2. Web User Interface (UI)

### IRQ-WEB-001: –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (Dashboard)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–±–∑–æ—Ä —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–≥–µ–Ω—Ç–æ–≤ (–∞–∫—Ç–∏–≤–Ω—ã–µ, –≤ –æ—à–∏–±–∫–µ, –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ)
- –ì—Ä–∞—Ñ –æ—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á (—Ä–∞–∑–º–µ—Ä, –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è)
- –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –∏ –∞–ª–µ—Ä—Ç—ã
- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (—Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É, –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –∞–≥–µ–Ω—Ç–∞)

**–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã**:
- –§–∏–ª—å—Ç—Ä—ã (–¥–∞—Ç–∞, —Ç–∏–ø —Å–æ–±—ã—Ç–∏—è, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (WebSocket)
- Export –≤ PDF

---

### IRQ-WEB-002: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞–º–∏

**–ü—É—Ç—å**: `/agents`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**:
- –¢–∞–±–ª–∏—Ü–∞ –≤—Å–µ—Ö –∞–≥–µ–Ω—Ç–æ–≤ —Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏, —Ç–∏–ø—É, —Å—Ç–∞—Ç—É—Å—É
- View –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∞–≥–µ–Ω—Ç–µ
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (—Å—Ç–∞—Ä—Ç–æ–≤–∞—Ç—å, –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å, —É–¥–∞–ª–∏—Ç—å)
- –õ–æ–≥–∏ –∏ –º–µ—Ç—Ä–∏–∫–∏ –∞–≥–µ–Ω—Ç–∞

---

### IRQ-WEB-003: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏

**–ü—É—Ç—å**: `/tasks`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**:
- –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π (—Å—Ç–∞—Ç—É—Å, –¥–∞—Ç–∞, –∞–≥–µ–Ω—Ç)
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏
- View –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –õ–æ–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

---

### IRQ-WEB-004: –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å

**–ü—É—Ç—å**: `/analytics`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**:
- –ì—Ä–∞—Ñ–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–æ–≤
- –¢—Ä–µ–Ω–¥—ã –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–æ–≤

---

## 3. REST API

### IRQ-API-001: –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–≥–µ–Ω—Ç–∞–º–∏

```
GET /api/v1/agents
  –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: page, per_page, filter[status], filter[type]
  Response: 200 OK
  {
    "data": [
      {
        "id": "uuid",
        "name": "string",
        "type": "analyzer|transformer|validator|reporter|integration",
        "status": "active|inactive|error",
        "created_at": "ISO8601",
        "capabilities": ["string"]
      }
    ],
    "meta": {
      "total": 100,
      "page": 1,
      "per_page": 10
    }
  }

GET /api/v1/agents/{id}
  Response: 200 OK —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π

POST /api/v1/agents
  Body: { "name": "...", "type": "...", "config": {...} }
  Response: 201 Created

PATCH /api/v1/agents/{id}
  Body: { "status": "...", "config": {...} }
  Response: 200 OK

DELETE /api/v1/agents/{id}
  Response: 204 No Content

POST /api/v1/agents/{id}/restart
  Response: 202 Accepted
```

---

### IRQ-API-002: –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏

```
GET /api/v1/tasks
  –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: page, per_page, filter[status], filter[agent_id]
  Response: 200 OK (—Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á)

GET /api/v1/tasks/{id}
  Response: 200 OK (–¥–µ—Ç–∞–ª–∏ –∑–∞–¥–∞—á–∏)

POST /api/v1/tasks
  Body: {
    "title": "string",
    "agent_id": "uuid",
    "parameters": {},
    "priority": 1-10,
    "deadline": "ISO8601"
  }
  Response: 201 Created

PATCH /api/v1/tasks/{id}
  Body: { "status": "...", "parameters": {...} }
  Response: 200 OK

DELETE /api/v1/tasks/{id}
  Response: 204 No Content

POST /api/v1/tasks/{id}/retry
  Response: 202 Accepted
```

---

### IRQ-API-003: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

```
POST /api/v1/auth/login
  Body: { "email": "...", "password": "..." }
  Response: 200 OK
  {
    "token": "jwt_token",
    "expires_at": "ISO8601"
  }

POST /api/v1/auth/logout
  Authorization: Bearer token
  Response: 200 OK

POST /api/v1/auth/refresh
  Body: { "token": "current_token" }
  Response: 200 OK { "token": "new_token" }
```

---

## 4. WebSocket Interface

### IRQ-WS-001: Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

**–ü—É—Ç—å**: `ws://domain/cable`

**–ö–∞–Ω–∞–ª—ã**:

1. **agents_status**
   ```json
   {
     "type": "agent_status_changed",
     "agent_id": "uuid",
     "status": "active|inactive|error",
     "timestamp": "ISO8601"
   }
   ```

2. **task_progress**
   ```json
   {
     "type": "task_progress",
     "task_id": "uuid",
     "progress": 0-100,
     "message": "string",
     "timestamp": "ISO8601"
   }
   ```

3. **system_alerts**
   ```json
   {
     "type": "alert",
     "level": "info|warning|error|critical",
     "message": "string",
     "timestamp": "ISO8601"
   }
   ```

---

## 5. Internal System Interfaces

### IRQ-SYS-001: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å Orchestrator-Agent

**Message Format**: JSON

**Messages**:

1. **Task Assignment**
   ```json
   {
     "type": "assign_task",
     "task_id": "uuid",
     "task_type": "string",
     "parameters": {},
     "deadline": "ISO8601"
   }
   ```

2. **Task Completion**
   ```json
   {
     "type": "task_completed",
     "task_id": "uuid",
     "result": {},
     "execution_time_ms": 1000
   }
   ```

3. **Heartbeat**
   ```json
   {
     "type": "heartbeat",
     "agent_id": "uuid",
     "status": "idle|working|error",
     "tasks_completed": 100,
     "last_update": "ISO8601"
   }
   ```

---

### IRQ-SYS-002: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∑–∞–¥–∞—á–∞-—Ä–µ–∑—É–ª—å—Ç–∞—Ç

**Storage Interface**:
```
save_result(task_id, result, metadata)
get_result(task_id)
update_result(task_id, partial_result)
```

---

### IRQ-SYS-003: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á

**Queue Interface**:
```
enqueue(task)         # –î–æ–±–∞–≤–∏—Ç—å –≤ –æ—á–µ—Ä–µ–¥—å
dequeue()             # –ü–æ–ª—É—á–∏—Ç—å —Å–ª–µ–¥—É—é—â—É—é –∑–∞–¥–∞—á—É
prioritize(task_id)   # –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤–ø–µ—Ä–µ–¥
cancel(task_id)       # –û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–¥–∞—á—É
get_queue_status()    # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—á–µ—Ä–µ–¥–∏
```

---

## 6. External System Interfaces

### IRQ-EXT-001: LLM Providers Integration

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã**:
- OpenAI API
- Anthropic Claude API
- Google Gemini API
- DeepSeek API

**–ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**:
```
call_llm(provider, model, prompt, parameters)
  Returns: {
    "result": "string",
    "tokens_used": 100,
    "cost": 0.001
  }
```

---

### IRQ-EXT-002: Database Interface

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ë–î**:
- PostgreSQL
- MySQL
- SQLite (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)

**Query Interface**:
```
execute_query(database_url, query, parameters)
  Returns: Result set or update count
```

---

### IRQ-EXT-003: File Storage Interface

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞**:
- Local filesystem
- AWS S3
- Azure Blob Storage
- Google Cloud Storage

**File Operations**:
```
upload_file(path, file_content)
download_file(path)
delete_file(path)
list_files(directory)
```

---

## 7. Error Response Format

**–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—à–∏–±–∫–∏**:
```json
{
  "error": {
    "code": "ERROR_CODE",
    "message": "Human readable message",
    "details": {
      "field": "error_message"
    },
    "timestamp": "ISO8601",
    "request_id": "uuid"
  }
}
```

**HTTP Status codes**:
- 200 OK - –£—Å–ø–µ—à–Ω–æ
- 201 Created - –°–æ–∑–¥–∞–Ω–æ
- 202 Accepted - –ü—Ä–∏–Ω—è—Ç–æ –∫ –æ–±—Ä–∞–±–æ—Ç–∫–µ
- 204 No Content - –£—Å–ø–µ—à–Ω–æ, –Ω–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- 400 Bad Request - –û—à–∏–±–∫–∞ –≤ –∑–∞–ø—Ä–æ—Å–µ
- 401 Unauthorized - –ù–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω
- 403 Forbidden - –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω
- 404 Not Found - –ù–µ –Ω–∞–π–¥–µ–Ω–æ
- 409 Conflict - –ö–æ–Ω—Ñ–ª–∏–∫—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è
- 422 Unprocessable Entity - –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–µ –ø—Ä–æ—à–ª–∞
- 429 Too Many Requests - Rate limit
- 500 Internal Server Error - –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
- 503 Service Unavailable - –°–µ—Ä–≤–∏—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

---

## 8. Data Format Specifications

### IRQ-DATA-001: JSON Schema

–í—Å–µ JSON –¥–∞–Ω–Ω—ã–µ –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è –ø–æ JSON Schema:

```json
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Agent",
  "type": "object",
  "properties": {
    "id": { "type": "string", "format": "uuid" },
    "name": { "type": "string", "minLength": 1, "maxLength": 255 },
    "type": { "enum": ["analyzer", "transformer", "validator", "reporter", "integration"] }
  },
  "required": ["id", "name", "type"],
  "additionalProperties": false
}
```

---

### IRQ-DATA-002: Datetime Format

–í—Å–µ –¥–∞—Ç—ã –∏ –≤—Ä–µ–º—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç ISO 8601 —Ñ–æ—Ä–º–∞—Ç:
```
2025-10-28T14:30:45.123Z
```

---

### IRQ-DATA-003: UUID Format

–í—Å–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç UUID v4:
```
550e8400-e29b-41d4-a716-446655440000
```

---

## 9. –ú–∞—Ç—Ä–∏—Ü–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

| –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å | –í–µ—Ä—Å–∏—è | Deprecated | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ |
|-----------|--------|-----------|-----------|
| REST API | v1 | No | 2025+ |
| REST API | v2 | No | 2026+ (planned) |
| WebSocket | v1 | No | 2025+ |
| GraphQL | v1 | No | 2026+ (planned) |
| gRPC | v1 | No | 2026+ (planned) |

---

## 10. –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å—á–∏—Ç–∞–µ—Ç—Å—è –≥–æ—Ç–æ–≤—ã–º, –∫–æ–≥–¥–∞:

1. ‚úì –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –≤ OpenAPI/Swagger
2. ‚úì –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç
3. ‚úì –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞
4. ‚úì Error handling –ø–æ–∫—Ä—ã—Ç —Ç–µ—Å—Ç–∞–º–∏
5. ‚úì Performance –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –Ω–æ—Ä–º—ã

---

**–°—Ç–∞—Ç—É—Å**: üü¢ –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥**: Security Requirements (SR-004)
