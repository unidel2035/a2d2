<!DOCTYPE html>
<html>
  <head>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type' />
    <style>
      body {
        font-family: Arial, sans-serif;
        line-height: 1.6;
        color: #333;
      }
      .container {
        max-width: 600px;
        margin: 0 auto;
        padding: 20px;
      }
      .header {
        background-color: #4CAF50;
        color: white;
        padding: 20px;
        text-align: center;
        border-radius: 5px 5px 0 0;
      }
      .content {
        background-color: #f9f9f9;
        padding: 20px;
        border: 1px solid #ddd;
      }
      .details {
        background-color: white;
        padding: 15px;
        margin: 15px 0;
        border-left: 4px solid #4CAF50;
      }
      .detail-row {
        margin: 10px 0;
      }
      .label {
        font-weight: bold;
        color: #555;
      }
      .urgent {
        color: #ff5722;
        font-weight: bold;
      }
      .footer {
        text-align: center;
        padding: 20px;
        color: #777;
        font-size: 12px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h2>Напоминание о техническом обслуживании</h2>
      </div>

      <div class="content">
        <p>Здравствуйте, <%= @technician.name %>!</p>

        <% if @days_before == 1 %>
          <p class="urgent">⚠️ Напоминаем, что завтра запланировано техническое обслуживание робота.</p>
        <% elsif @days_before == 3 %>
          <p>Напоминаем, что через 3 дня запланировано техническое обслуживание робота.</p>
        <% else %>
          <p>Напоминаем, что через <%= @days_before %> дней запланировано техническое обслуживание робота.</p>
        <% end %>

        <div class="details">
          <h3>Детали технического обслуживания:</h3>

          <div class="detail-row">
            <span class="label">Робот:</span>
            <%= @robot.serial_number %> (<%= @robot.manufacturer %>)
          </div>

          <div class="detail-row">
            <span class="label">Дата ТО:</span>
            <%= @maintenance_record.scheduled_date.strftime("%d.%m.%Y") %>
          </div>

          <div class="detail-row">
            <span class="label">Тип обслуживания:</span>
            <%= I18n.t("activerecord.attributes.maintenance_record.maintenance_types.#{@maintenance_record.maintenance_type}", default: @maintenance_record.maintenance_type) %>
          </div>

          <% if @robot.location.present? %>
          <div class="detail-row">
            <span class="label">Местоположение:</span>
            <%= @robot.location %>
          </div>
          <% end %>

          <div class="detail-row">
            <span class="label">Наработка:</span>
            <%= @robot.total_operation_hours %> часов
          </div>
        </div>

        <p>Пожалуйста, убедитесь в наличии необходимых инструментов и запасных частей.</p>

        <% if @maintenance_record.description.present? %>
        <div class="details">
          <h4>Дополнительная информация:</h4>
          <p><%= @maintenance_record.description %></p>
        </div>
        <% end %>
      </div>

      <div class="footer">
        <p>Это автоматическое уведомление из системы A2D2</p>
        <p>Если у вас есть вопросы, свяжитесь с вашим руководителем</p>
      </div>
    </div>
  </body>
</html>
