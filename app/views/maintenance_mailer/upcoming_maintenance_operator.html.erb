<!DOCTYPE html>
<html>
  <head>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type' />
    <style>
      body {
        font-family: Arial, sans-serif;
        line-height: 1.6;
        color: #333;
      }
      .container {
        max-width: 600px;
        margin: 0 auto;
        padding: 20px;
      }
      .header {
        background-color: #2196F3;
        color: white;
        padding: 20px;
        text-align: center;
        border-radius: 5px 5px 0 0;
      }
      .content {
        background-color: #f9f9f9;
        padding: 20px;
        border: 1px solid #ddd;
      }
      .details {
        background-color: white;
        padding: 15px;
        margin: 15px 0;
        border-left: 4px solid #2196F3;
      }
      .detail-row {
        margin: 10px 0;
      }
      .label {
        font-weight: bold;
        color: #555;
      }
      .warning {
        background-color: #fff3cd;
        border: 1px solid #ffc107;
        padding: 15px;
        margin: 15px 0;
        border-radius: 5px;
      }
      .footer {
        text-align: center;
        padding: 20px;
        color: #777;
        font-size: 12px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h2>Уведомление о плановом техническом обслуживании</h2>
      </div>

      <div class="content">
        <p>Здравствуйте, <%= @operator.name %>!</p>

        <% if @days_before == 1 %>
          <div class="warning">
            ⚠️ Важно: Завтра запланировано техническое обслуживание робота, с которым вы работаете.
          </div>
        <% elsif @days_before == 3 %>
          <p>Уведомляем вас, что через 3 дня запланировано техническое обслуживание робота, с которым вы работаете.</p>
        <% else %>
          <p>Уведомляем вас, что через <%= @days_before %> дней запланировано техническое обслуживание робота, с которым вы работаете.</p>
        <% end %>

        <div class="details">
          <h3>Детали технического обслуживания:</h3>

          <div class="detail-row">
            <span class="label">Робот:</span>
            <%= @robot.serial_number %> (<%= @robot.manufacturer %>)
          </div>

          <div class="detail-row">
            <span class="label">Дата ТО:</span>
            <%= @maintenance_record.scheduled_date.strftime("%d.%m.%Y") %>
          </div>

          <div class="detail-row">
            <span class="label">Тип обслуживания:</span>
            <%= I18n.t("activerecord.attributes.maintenance_record.maintenance_types.#{@maintenance_record.maintenance_type}", default: @maintenance_record.maintenance_type) %>
          </div>

          <% if @technician.present? %>
          <div class="detail-row">
            <span class="label">Ответственный техник:</span>
            <%= @technician.name %> (<%= @technician.email %>)
          </div>
          <% end %>
        </div>

        <div class="warning">
          <strong>Обратите внимание:</strong>
          <ul>
            <li>Робот будет недоступен для задач в день проведения ТО</li>
            <li>Пожалуйста, завершите все текущие задачи до указанной даты</li>
            <li>Не планируйте новые задачи на <%= @maintenance_record.scheduled_date.strftime("%d.%m.%Y") %></li>
          </ul>
        </div>

        <p>Если у вас есть срочные задачи, которые необходимо выполнить, пожалуйста, свяжитесь с вашим руководителем для перепланирования.</p>
      </div>

      <div class="footer">
        <p>Это автоматическое уведомление из системы A2D2</p>
        <p>Если у вас есть вопросы, свяжитесь с ответственным техником или вашим руководителем</p>
      </div>
    </div>
  </body>
</html>
